{"name":"Emond","tagline":"Smart energy monitor device software for EmonCMS","body":"# emond\r\n#### Smart Energy Monitor\r\n\r\n### About\r\nThis software implements a Smart Energy Monitor to be run on the RaspberryPi. In short, it is a simplified version of a combination of the *emonTX*, *emonGLCD* and *emonBase* modules, developed by the OpenEnergyMonitor project (http://openenergymonitor.org). It is a pure software solution and doesn't require any additional hardware modules to be added.  \r\nIt connects to an energy meter via the SO (pulse) interface and measures/calculates the instant power consumption as well as the electrical energy on daily and monthly basis. The data is sent to EmonCMS (http://emoncms.org) which is the Web server used by the OpenEnergyMonitor project. EmonCMS can then be deployed to further process your data (store, manipulate, chart, ...).  \r\nThe easiest way to display the energy data is to use the \"My Electrics\" appliance in EmonCMS.  \r\nA local LCD display is supported to have instant access to the latest measurements.  \r\n<br>\r\n\r\n### Features\r\n- Instant power measurement using energy meter pulses\r\n- Daily and monthly energy calculation\r\n- Periodic saving of energy counters to persistant storage and restoring at restart\r\n- Filtering of short glitches and false pulses on the pulse counting GPIO line\r\n- Display of measurements on local LCD display (via integrated lcdproc client)\r\n- Transmission of measurements to EmonCMS (via WebAPI)\r\n- Full compatibility with \"My Electric\" appliance in EmonCMS\r\n- Easy customization of parameters via configuration file  \r\n- Configurable WebAPI update rate limit\r\n<br>\r\n\r\n### Nice to have (wishlist)\r\n- Alarm generation when approaching maximum power consumption\r\n- Display daily/monthly energy cost\r\n- Command line tool for reading current power values and energy counters\r\n- Support for Energy meters with Modbus interface\r\n- Support for 1-wire temperatue sensor  \r\n<br>\r\n\r\n### Hardware modules\r\n#### Raspberry Pi\r\nAs base module a Raspberry Pi is used to run the software. This dependency is derived from the use of the wiringPi library which greatly simplifies the GPIO handling. However, if the GPIO programming is ported to a standard framework like Linux GPIO sysfs, then **emond** should be able to run also on other embedded Linux boards.  \r\n\r\n#### Energy meter\r\nSince **emond** uses the pulse counting method to calculate the instant power and electrical energy, an energy meter with a pulse output has to be used. There are basically two methods:  \r\n- optical pulse counting (via energy meters LED)\r\n- electrical puylse counting (via energy meters SO interface)\r\n\r\nFor more info on pulse counting see http://openenergymonitor.org/emon/buildingblocks/introduction-to-pulse-counting.  \r\n\r\n**emond** is being developed and tested with this type of energy meter that was installed in addition to the one provided by the energy company:  \r\n\r\n![Energy Meter](http://www.digitale-elektronik.de/shopsystem/images/WSZ230V-50A_large.jpg)\r\n\r\nThe cabling has to be done as follows:\r\n- SO- output on energy meter to GND on RaspberryPi\r\n- SO+ output on energy meter to GPIO[x] on RaspberryPi  \r\n<br>\r\n\r\n#### LCD display\r\nThe LCD display is optional. It is controlled via the *lcdproc* software. **emond** implements an lcdproc client which sends its data to lcdproc which eventually displays the data on the LCD. Therefore any display supported by lcdproc can be used. However **emond** is optimised for a 20x4 character display such this one:\r\n\r\n![LCD display](http://store.melabs.com/graphics/00000001/CFAH2004AYYHJT.jpg)\r\n\r\nOn the RaspberryPi, lcdproc supports this kind of display connected via the GPIO lines.  \r\n<br>\r\n\r\n### Screenshot\r\n\r\nThis is a screenshot of the EmonCMS dashboard, showing a daily power consumption chart and the current power in a gauge.  \r\n\r\n![Screenshot](https://raw.githubusercontent.com/ondrej1024/emond/master/image/dashboard.png)\r\n\r\n\r\nAnd this is the EmonCMS MyElectric Web application (which looks really good on a Smartphone).  \r\n\r\n![MyElectric](https://raw.githubusercontent.com/ondrej1024/emond/master/image/myelectric.png)\r\n\r\n<br>\r\n\r\n### Installation\r\n\r\nIf you don't have a cross compile environment for the RaspberryPi installed on your PC, it is easiest to build the software directly on the RaspberryPi. Follow theses simple steps from the RPi console. Make sure you have the necessary packages installed (e.g. git).  \r\n\r\n* Install the wiringPi library :  \r\nFollow the instructions on the projects home page: http://wiringpi.com/download-and-install  \r\n\r\n* Install CURL library :  \r\n<pre>\r\n    sudo apt-get install libcurl4-gnutls-dev\r\n</pre>\r\n\r\n* Clone git repository :  \r\n<pre>\r\n    git clone https://github.com/ondrej1024/emond\r\n    cd emond\r\n</pre>\r\n\r\n* Alternatively get latest source code version :  \r\n<pre>\r\n    wget https://github.com/ondrej1024/emond/archive/master.zip\r\n    unzip master.zip\r\n    cd emond-master\r\n</pre>\r\n\r\n* Build and install :  \r\n<pre>\r\n    make\r\n    sudo make install\r\n</pre>\r\n\r\n* Install lcdproc :  \r\n**emond** needs the LCDd server from the lcdproc project (http://www.lcdproc.org) to be installed and running on your system if you want to display the measurements on a local LCD diplay. However, emond can also be used without local display.  \r\n<pre>\r\n    sudo apt-get install lcdproc\r\n</pre>\r\nThen you need to configure the lcdproc server LCDd according to your display via its configuration file LCDd.conf  \r\n<br>\r\n\r\n\r\n### Configuration\r\n\r\nYou can customize the application to your needs via the config file emon.conf which should be placed in the /etc/ system folder. An example file is provided together with the programs source code.  \r\n\r\n<pre>\r\n# Pulse counter specific parameters\r\n################################################\r\n[counter]\r\npulse_input_pin = 25    # BCM pin number used for pulse input from energy meter\r\nwh_per_pulse    = 100   # Wh per pulse (Energy meter setting)\r\npulse_length    = 100   # pulse length (in ms), leave blank for auto detection\r\nmax_power       = 3300  # max possible power (in W) provided by energy company\r\n\r\n# Storage parameters\r\n################################################\r\n[storage]\r\nflash_dir = /media/data # Folder for permanent (writable) storage\r\n\r\n# LCD display specific parameters\r\n################################################\r\n[lcd]\r\nlcdproc_port =  # Specify this if not using default lcdproc port\r\n \r\n# WebAPI specific parameters\r\n################################################\r\n[webapi]\r\napi_base_uri = http://emoncms.org # Public EmonCMS server\r\napi_key      = 1234567890  # Personal EmonCMS API key \r\napi_update_rate = 20       # min delay (in s) between 2 API requests\r\nnode_number  = 1           # Identifier of your node in EmonCMS\r\n</pre>\r\n\r\n<br>\r\n\r\n\r\n### Run the program\r\n\r\nDuring the installation process, an init script is automatically installed in /etc/init.d/ Therefore the emond program can be started via the following command:\r\n<pre>\r\n    sudo service emon start\r\n</pre>\r\n\r\nIf you want to autostart the program at every system reboot (recommended), issue the following command:\r\n<pre>\r\n    sudo update-rc.d emon defaults\r\n</pre>\r\n\r\n\r\n### Contributing\r\n\r\nAny contribution like feedback, bug reports or code proposals are welcome and highly encouraged.  \r\nGet in touch by e-mail to ondrej.wisniewski (at) gmail.com  \r\n","google":"UA-55164186-1","note":"Don't delete this file! It's used internally to help with page regeneration."}